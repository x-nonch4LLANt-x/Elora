import{A as l,ak as m,aq as u,al as v,$ as b,ac as p,h as g,a7 as k,ar as y,ad as w,as as _,m as M,g as D,D as A,k as S,at as x}from"./D97IuHMQ.js";import{s as B,g as F}from"./B3VlpfkE.js";class ${anchor;#s=new Map;#t=new Map;#e=new Map;#r=new Set;#i=!0;constructor(s,t=!0){this.anchor=s,this.#i=t}#a=()=>{var s=l;if(this.#s.has(s)){var t=this.#s.get(s),e=this.#t.get(t);if(e)m(e),this.#r.delete(t);else{var a=this.#e.get(t);a&&(this.#t.set(t,a.effect),this.#e.delete(t),a.fragment.lastChild.remove(),this.anchor.before(a.fragment),e=a.effect)}for(const[i,n]of this.#s){if(this.#s.delete(i),i===s)break;const f=this.#e.get(n);f&&(u(f.effect),this.#e.delete(n))}for(const[i,n]of this.#t){if(i===t||this.#r.has(i))continue;const f=()=>{if(Array.from(this.#s.values()).includes(i)){var h=document.createDocumentFragment();y(n,h),h.append(b()),this.#e.set(i,{effect:n,fragment:h})}else u(n);this.#r.delete(i),this.#t.delete(i)};this.#i||!e?(this.#r.add(i),v(n,f,!1)):f()}}};#n=s=>{this.#s.delete(s);const t=Array.from(this.#s.values());for(const[e,a]of this.#e)t.includes(e)||(u(a.effect),this.#e.delete(e))};ensure(s,t){var e=l,a=w();if(t&&!this.#t.has(s)&&!this.#e.has(s))if(a){var i=document.createDocumentFragment(),n=b();i.append(n),this.#e.set(s,{effect:p(()=>t(n)),fragment:i})}else this.#t.set(s,p(()=>t(this.anchor)));if(this.#s.set(e,s),a){for(const[f,c]of this.#t)f===s?e.skipped_effects.delete(c):e.skipped_effects.add(c);for(const[f,c]of this.#e)f===s?e.skipped_effects.delete(c.effect):e.skipped_effects.add(c.effect);e.oncommit(this.#a),e.ondiscard(this.#n)}else g&&(this.anchor=k),this.#a()}}let o=!1,d=Symbol();function q(r,s,t){const e=t[s]??={store:null,source:M(void 0),unsubscribe:_};if(e.store!==r&&!(d in t))if(e.unsubscribe(),e.store=r??null,r==null)e.source.v=void 0,e.unsubscribe=_;else{var a=!0;e.unsubscribe=B(r,i=>{a?e.source.v=i:S(e.source,i)}),a=!1}return r&&d in t?F(r):D(e.source)}function C(r,s){return r.set(s),s}function E(){const r={};function s(){A(()=>{for(var t in r)r[t].unsubscribe();x(r,d,{enumerable:!1,value:!0})})}return[r,s]}function I(r){var s=o;try{return o=!1,[r(),o]}finally{o=s}}export{$ as B,q as a,C as b,I as c,E as s};
